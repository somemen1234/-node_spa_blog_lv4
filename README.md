# node_spa_blog_lv4

### 회원가입과 로그인을 통한 내 블로그 백엔드 서버 구현(게시판)

### Lv3 블로그 디벨롭(댓글 추가, 좋아요 추가, 좋아요 누른 게시글 조회 기능 추가)

---

**댓글 CRUD**

- 해당 게시글에 대한 댓글 조회는 누구나 조회 가능
- 댓글 생성은 로그인이 되어 있는 사용자만이 가능하고 생성 시, 해당 댓글에 게시글과 작성한 user_id도 같이 저장(어떤 사용자가 작성했는지 알 수 있도록)
- 댓글 수정은 comments 테이블에 저장된 user_id와 현재 로그인 중인 user_id를 비교 해 같았을 때만 수정 가능
- 댓글 삭제도 수정과 동일하게 구현

**좋아요 기능**

- 게시글의 좋아요는 로그인이 되어 있어야만 좋아요를 누를 수 있음
- 좋아요를 누르면 posts 테이블의 likes를 +1증가시키고 likes테이블에 해당 유저의 정보와 게시글의 정보를 저장(한 번 더 좋아요를 누르게 되었을 경우에는 좋아요 취소를 위해서 likes테이블에 저장을 했고 posts 테이블에는 해당 게시글의 총 like수를 저장하기 위함)
- 데이터의 무결성을 지키도록 트랜잭션으로 두 개의 작업을 묶어 likes테이블에 저장이 되고 posts에도 likes 수가 +1증가되어야만 commit()되도록 설정(취소도 동일)

**접속중인 사용자가 좋아요 누른 게시글 보기**

- 현재 접속중인 user_id를 이용해 likes 테이블에 저장되어 있는 post_id를 가져와 해당 게시글의 정보를 출력해줌

**ERD**
![drawSQL-spa-blog-lv4-export-2023-07-06](https://github.com/somemen1234/node_spa_blog_lv3/assets/28723327/cbc3b89f-7256-47a7-ae74-6f47710a8ca4)

**상세 API** https://charming-castanet-ba9.notion.site/3c4bdf9b265e4a93b1e9e6f5bc79e81e?v=89523d64e28346bc89669a53beae3fad&pvs=4
